<div class="container mx-auto p-6">
  <!-- Message de succès -->
  <div *ngIf="successMessage" class="bg-green-500 text-white p-4 rounded-md mb-4">
    {{ successMessage }}
  </div>

  <h1 class="text-3xl font-bold mb-6 text-center">Fiche Transparisation</h1>

  <!-- Formulaire de saisie -->
  <form class="mb-6 shadow-lg p-6 bg-white rounded-lg">
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Saisir le PTF</label>
      <input [(ngModel)]="ptf"
             name="ptf"
             type="text"
             value="CIV"
             class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"
             readonly>
    </div>

    <!-- Date Image -->
    <div class="mb-4">
      <label for="date_image" class="block text-sm font-medium text-gray-700">Date image</label>
      <input [(ngModel)]="dateImage"
             name="dateImage"
             id="date_image"
             type="date"
             class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Date Image Fin -->
    <div class="mb-4">
      <label for="date_image_fin" class="block text-sm font-medium text-gray-700">Date image fin</label>
      <input [(ngModel)]="dateImageFin"
             name="dateImageFin"
             id="date_image_fin"
             type="date"
             class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Bouton "Chercher les informations" -->
    <button type="button" (click)="chercherInformations()"
            class="w-full py-3 mb-4 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold transition duration-200">
      Chercher les informations
    </button>

    <!-- Bouton "Transpariser la fiche" -->
    <button type="button" (click)="transpariserFiche()"
            class="w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition duration-200">
      Transpariser la fiche
    </button>
  </form>

  <!-- Tableau des données amélioré -->
  <div class="overflow-x-auto bg-white shadow-lg rounded-xl mt-6">
    <table class="w-full border-collapse">
      <thead class="bg-blue-600 text-white uppercase text-sm leading-normal">
      <tr class="hover:bg-transparent">
        <th class="py-4 px-6 text-left">Date Image</th>
        <th class="py-4 px-6 text-left">Date Image Fin</th>
        <th class="py-4 px-6 text-left">Titre</th>
        <th class="py-4 px-6 text-left">Code ISIN</th>
        <th class="py-4 px-6 text-left">Description</th>
        <th class="py-4 px-6 text-left">Catégorie</th>
        <th class="py-4 px-6 text-left">Dette Publique</th>
        <th class="py-4 px-6 text-left">Dette Privée</th>
        <th class="py-4 px-6 text-left">Action</th>
      </tr>
      </thead>
      <tbody class="text-gray-700 text-sm font-medium">
      <tr *ngFor="let item of transparisationData" class="border-b border-gray-300 hover:bg-gray-100 transition duration-200">
        <td class="py-4 px-6">{{ item.dateImage | date }}</td>
        <td class="py-4 px-6">{{ item.dateImageFin | date }}</td>
        <td class="py-4 px-6">{{ item.titre }}</td>
        <td class="py-4 px-6">{{ item.codeIsin }}</td>
        <td class="py-4 px-6">{{ item.description }}</td>
        <td class="py-4 px-6">{{ item.categorie }}</td>
        <td class="py-4 px-6">{{ item.dettePublic | number }}</td>
        <td class="py-4 px-6">{{ item.dettePrivee | number }}</td>
        <td class="py-4 px-6">{{ item.action }}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
